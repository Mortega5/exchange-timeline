<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-header-panel/paper-header-panel.html">
<link rel="import" href="../paper-styles/paper-styles.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="./iron-ajax/iron-ajax.html">

<!--
An element providing a solution to no problem in particular.

Example:

<sof-timeline></sof-timeline>

@group Seed Elements
@element sof-timeline
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="sof-timeline">

  <template>
    <style>
      :host {
        display: block;
        width: var(--google-timeline-width, 450px);
        height: var(--google-timeline-height, 400px);
        font-family: var(--google-timeline-font-family, Roboto)
      }
      #panel{
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
        background-color: var(--paper-grey-200);
        border-radius: 2px;
      }
      #panel .paper-header {
        background-color: var(--paper-brown-800);
        color: white;
        padding:5px 8px;
        @apply(--google-timeline-header)
          }
      #panel .paper-header .title{
        background: url('http://sstatic.net/stackexchange/img/logos/se/se-logo.png?v=dd7153fcc7fa') no-repeat;
        background-size: contain;
        height: var(--google-timeline-title-height, 45px);
        margin:auto;
      }
      #panel .content {
        padding:6px;
      }
    </style>

    <iron-ajax
               url="https://api.stackexchange.com/2.2/events"
               params='{{_requestEventsParam}}'
               handle-as="json"
               on-response="handleResponse"
               debounce-duration="300">

    </iron-ajax>
    <paper-header-panel id="panel" mode="waterfall" class="blue">
      <div class="paper-header horizontal layout">
        <div class="title flex"></div>
        <div><paper-icon-button icon="refresh" on-click="refresh"></paper-icon-button></div>
      </div>
      <!-- CONTENT INFO-->
      <div class="content">
        <p>Testing</p>
      </div>
    </paper-header-panel>
  </template>


</dom-module>

<script>

  Polymer({

    is: 'sof-timeline',

    properties: {

      /**
       * `clientId` your clientId on StackOverFlow
       */
      access_token: {
        type: String,
        reflectToAttribute: true
      },
      /**
        * `key` your key on StackOverFlow
        */
      key: {
        type: String,
        reflectToAttribute: true
      },
      /**
        * `site`
        */
      site: {
        type:String,
        reflectToAttribute: true
      },
      _requestEventParams: {
        type: String,
        computed: "_composeRequestParams(access_token, key, site)"
      },

      /**
       * Describes the author of the element, but is really just an excuse to
       * show off JSDoc annotations.
       *
       * @type {{name: string, image: string}}
       */
      author: {
        type: Object,
        // Use `value` to provide a default value for a property, by setting it
        // on your element's prototype.
        //
        // If you provide a function, as we do here, Polymer will call that
        // _per element instance_.
        //
        // We do that to ensure that each element gets its own copy of the
        // value, rather than having it shared across all instances (via the
        // prototype).
        value: function() {
          return {
            name:  'Dimitri Glazkov',
            image: 'http://addyosmani.com/blog/wp-content/uploads/2013/04/unicorn.jpg',
          };
        }
      },

    },

    // Element Lifecycle

    ready: function() {

    },
    _composeRequestParams: function(access_token, key, site) {
      return {access_token: access_token, key: key, site: site};
    }
    /**
     * The `sof-timeline-lasers` event is fired whenever `fireLasers` is called.
     *
     * @event sof-timeline-lasers
     * @detail {{sound: String}}
     */

    /**
     * Sometimes it's just nice to say hi.
     *
     * @param {string} greeting A positive greeting.
     * @return {string} The full greeting.
     */
    sayHello: function(greeting) {
      var response = greeting || 'Hello World!';
      return 'sof-timeline says, ' + response;
    },

    /**
     * Attempt to destroy this element's enemies with a beam of light!
     *
     * Or, at least, dispatch an event in the vain hope that someone else will
     * do the zapping.
     */
    fireLasers: function() {
      this.fire('sof-timeline-lasers', {sound: 'Pew pew!'});
    }

  });

</script>
