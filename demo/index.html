<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>exchange-timeline Demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../exchange-timeline.html">
  </head>
  <body unresolved>


    <exchange-timeline access_token="9xMaEW1CW4K3RQEvFcsztQ))" key="XGiATUM3eJCNfJviQBxefw((" site="stackoverflow.com">
    </exchange-timeline>

    <script>
      document.addEventListener('WebComponentsReady', function(){
        setTimeout(function(){
          var all_elements = document.querySelector('exchange-timeline').getElementsByTagName('*')
          var functions= {
            '1.4.7': function(callback){
              var count= 0;
              var audioList = document.getElementsByTagName('audio');
              var length = audioList.length;
              var searchAudio = function(item){
                var finded = false;
                var elem;
                var lenght = audioList.length
                for(i=0;i<length && !finded;i++){
                  if (audioList[i] == item){
                    finded = true;
                    elem = audioList[i];
                  }
                }
                return elem;
              }
              var playCallback = function(e){
                console.log('Play de: ', e);
                var elem = searchAudio(e.target);
                count++;
              };
              var pauseCallback = function(e){
                console.log('Pause de: ', e);
                count++;
                var elem = searchAudio(e.target);
                console.log('Elem: ', elem);
              };

              for(i=0;i<length;i++){
                audioList[i].onplay = playCallback;
                audioList[i].onpause = pauseCallback;
              }
              for(i=0;i<all_elements.length;i++){
                elem = all_elements[i];
                if (elem.click){
                  elem.click();
                }
              }
              setTimeout(function(){
                callback(count==length*2);
              },300)
              
            }
          }
          functions["1.4.7"](function(cumple){
            console.log('Cumple el 1.4.7', cumple);  
          });

          
        },2000);
      })
    </script>

  </body>
</html>
